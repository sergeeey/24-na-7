# ADR 0005: Валидация через Pydantic

**Статус:** Принято  
**Дата:** 2024-02-17  
**Авторы:** Команда разработки

## Context

Требовалась валидация данных от LLM и внешних API. Необходимо было обеспечить типобезопасность и валидацию структуры данных.

## Decision

Использование Pydantic для валидации всех данных от LLM и внешних API.

**Реализация:**
- Схемы в `src/llm/schemas/`:
  - `response.py` - базовые схемы ответов LLM
  - `digest.py` - схемы для дайджестов и анализа
  - `osint.py` - схемы для OSINT ответов
- Валидация всех LLM ответов перед сохранением в БД
- Retry с fallback при невалидных ответах

## Consequences

**Положительные:**
- Типобезопасность данных
- Автоматическая валидация структуры
- Защита от невалидных данных от LLM
- Улучшенная отладка (понятные ошибки валидации)

**Отрицательные:**
- Дополнительный overhead на валидацию
- Необходимость обновления схем при изменении форматов
- Возможные проблемы с backward compatibility

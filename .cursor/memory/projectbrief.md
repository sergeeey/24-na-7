# Project: Reflexio 24/7

## üß† –ú–∏—Å—Å–∏—è

–°–æ–∑–¥–∞—Ç—å AI-Native —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å–ª—É—à–∞–µ—Ç —Ä–µ—á—å 24/7, —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ—Å (–Ω–µ —Ç–∏—à–∏–Ω—É), —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –≤–µ—á–µ—Ä–æ–º (22:50/23:10) –≤—ã–¥–∞—ë—Ç –¥–Ω–µ–≤–Ω–æ–π –¥–∞–π–¥–∂–µ—Å—Ç —Å —ç–º–æ—Ü–∏—è–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏.

**–ü–æ–ª—å–∑–∞:** Reflexio –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–∏–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–≤–æ–µ–≥–æ –¥–Ω—è ‚Äî —á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª, –∫–∞–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞–ª, –∏ —á–µ–º—É —Å—Ç–æ–∏—Ç —É–¥–µ–ª–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –∑–∞–≤—Ç—Ä–∞. –≠—Ç–æ –ø–∞—Å—Å–∏–≤–Ω—ã–π –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å —Å–∞–º–æ–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–º —Ü–∏–∫–ª–æ–º.

## üéØ –¶–µ–ª—å MVP

E2E-–∫–æ–Ω—Ç—É—Ä: –∏–º–ø–æ—Ä—Ç WhatsApp ‚Üí —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (ASR) ‚Üí –∞–Ω–∞–ª–∏–∑ ‚Üí –¥–∞–π–¥–∂–µ—Å—Ç ‚Üí Telegram-–±–æ—Ç.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–¢–∏–ø: **–ú–æ–¥—É–ª—å–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç (Modulith)**

–§—Ä–µ–π–º–≤–æ—Ä–∫: **FastAPI + SQLite (–ª–æ–∫–∞–ª—å–Ω–æ)** ‚Üí **Supabase (–≤ –ø—Ä–æ–¥–µ)**

–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:  

- `edge/` ‚Äî –∑–∞–ø–∏—Å—å –∏ VAD  

- `asr/` ‚Äî —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (faster-whisper)  

- `analyze/` ‚Äî —Å–º—ã—Å–ª, —ç–º–æ—Ü–∏–∏, –∏–Ω—Å–∞–π—Ç—ã  

- `api/` ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã  

- `bot/` ‚Äî Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  

- `digest/` ‚Äî –æ—Ç—á—ë—Ç—ã –∏ nightly-—Å–ª–æ—Ç—ã  

## ‚öôÔ∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- Telegram-–±–æ—Ç: `/checkin`, `/report`, `/reminders`

- WhatsApp –∏–º–ø–æ—Ä—Ç: `.txt` –∏ `.zip`

- Zero-retention –∞—É–¥–∏–æ

- PII-–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ (email/—Ç–µ–ª–µ—Ñ–æ–Ω—ã)

## üß© API Endpoints

| Method | Path | Function |
|--------|------|-----------|
| POST | `/ingest/whatsapp` | –∏–º–ø–æ—Ä—Ç —á–∞—Ç–æ–≤ |
| GET | `/ingest/status/{id}` | —Å—Ç–∞—Ç—É—Å –ø–∞–π–ø–ª–∞–π–Ω–∞ |
| POST | `/analyze/message/{id}` | –∞–Ω–∞–ª–∏–∑ |
| GET | `/digest/today` | –¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ |
| GET | `/events` | —Ñ–∞–∫—Ç—ã –∑–∞ –¥–µ–Ω—å |

## üîí –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

1. Security (zero retention, PII-mask)

2. Maintainability (‚â§500 —Å—Ç—Ä–æ–∫ –Ω–∞ –º–æ–¥—É–ª—å)

3. Correctness (–≤–∞–ª–∏–¥–∞—Ü–∏—è Pydantic)

4. Performance (batch-ASR, async)

## üß† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

`Python 3.11+`, `FastAPI`, `faster-whisper`, `sounddevice`, `webrtcvad`, `ffmpeg`, `sqlite`, `Supabase`, `python-telegram-bot`, `structlog`, `pytest`, `ruff`, `mypy`, `black`.

## üìÖ Night Routine

- **22:50** ‚Äî –¥–∞–π–¥–∂–µ—Å—Ç –¥–Ω—è  

- **23:10** ‚Äî —á–µ–∫-–∏–Ω: 3 –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é  

(–±–æ—Ç –¥–µ—Ä–≥–∞–µ—Ç API, –Ω–µ –¥—É–º–∞–µ—Ç —Å–∞–º)

## üß≠ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

1. SQLite ‚Üí Supabase  

2. –¢–µ–∫—Å—Ç–æ–≤—ã–µ —ç–º–æ—Ü–∏–∏ ‚Üí –≥–æ–ª–æ—Å–æ–≤—ã–µ (SER)  

3. –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ ‚Üí MCP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  

4. Observability (–º–µ—Ç—Ä–∏–∫–∏, latency, TTFT)

## üßØ Rollback Plan

```
git restore --source=origin/main .
drop table if exists ingest_queue;
rm -rf storage/uploads/*
```


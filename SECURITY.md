# üîí Security Policy ‚Äî Reflexio 24/7

**–ü–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π**

---

## üõ°Ô∏è –ú–æ–¥–µ–ª—å —É–≥—Ä–æ–∑

### –£–≥—Ä–æ–∑—ã –∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏

| –£–≥—Ä–æ–∑–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|--------|----------|-----------|
| **PII —É—Ç–µ—á–∫–∞** | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö/–≤—ã–≤–æ–¥–∞—Ö | SAFE PII masking, Zero-retention –∞—É–¥–∏–æ |
| **–°–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ** | API –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ | `.env` –≤ `.gitignore`, Secret management |
| **SQL Injection** | –í–Ω–µ–¥—Ä–µ–Ω–∏–µ SQL –∫–æ–¥–∞ | Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã |
| **API –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞** | DDoS –∞—Ç–∞–∫–∏ | Rate limiting, SAFE payload validation |
| **–ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø** | –î–æ—Å—Ç—É–ø –∫ API –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase, Domain allowlist |

---

## üîê –†–∞–±–æ—Ç–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–í–ê–ñ–ù–û:** –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env`, –∫–æ—Ç–æ—Ä—ã–π **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—Å—è** –≤ Git.

```bash
# .env —Ñ–∞–π–ª (—É–∂–µ –≤ .gitignore)
BRAVE_API_KEY=...
BRIGHTDATA_API_KEY=...
OPENAI_API_KEY=...
SUPABASE_SERVICE_ROLE=...  # ‚ö†Ô∏è –û–ü–ê–°–ù–û! –¢–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ç–µ—á–∫—É —Å–µ–∫—Ä–µ—Ç–æ–≤
python .cursor/validation/safe/run.py --mode strict
grep -r "api.*key\|password\|token" --exclude-dir=venv --exclude-dir=.git .
```

### –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π

1. –û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `python scripts/smoke_llm.py` (–¥–ª—è LLM)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `@playbook validate-mcp` (–¥–ª—è MCP)

---

## üîç PII (Personally Identifiable Information)

### –ü–æ–ª–∏—Ç–∏–∫–∞ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è

SAFE –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å–∫–∏—Ä—É–µ—Ç:
- Email –∞–¥—Ä–µ—Å–∞ ‚Üí `[EMAIL_REDACTED]`
- –¢–µ–ª–µ—Ñ–æ–Ω—ã ‚Üí `[PHONE_REDACTED]`
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã ‚Üí `[CARD_REDACTED]`
- IP –∞–¥—Ä–µ—Å–∞ ‚Üí `[IP_REDACTED]`

### –í–∫–ª—é—á–µ–Ω–∏–µ PII –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –í .env
SAFE_PII_MASK=1
SAFE_MODE=strict
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ PII

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ PII –≤ —Ç–µ–∫—Å—Ç–∞—Ö
python - <<'PYCODE'
from .cursor.validation.safe.checks import SAFEChecker
checker = SAFEChecker()
has_pii, detected, masked = checker.check_pii_in_text("Contact: john@example.com or +7 999 123-45-67")
print(f"PII detected: {has_pii}, Types: {detected}")
print(f"Masked: {masked}")
PYCODE
```

---

## üö´ Zero-Retention Policy

### –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã

- –ê—É–¥–∏–æ —É–¥–∞–ª—è–µ—Ç—Å—è **—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏**
- –•—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è: **24 —á–∞—Å–∞**

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```python
# –í –∫–æ–¥–µ (src/api/main.py)
EDGE_DELETE_AFTER_UPLOAD = True  # –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
```

---

## üåê Domain Allowlist

### –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã

–ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `.cursor/validation/safe/policies.yaml`:

```yaml
domain_allowlist:
  allowed:
    - "api.search.brave.com"
    - "api.brightdata.com"
    - "*.supabase.co"
    - "api.openai.com"
    - "api.anthropic.com"
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞

1. –û–±–Ω–æ–≤–∏—Ç—å `policies.yaml`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API: `docker compose restart api`

---

## üîí Supabase Security

### Row Level Security (RLS)

**–í–ê–ñ–ù–û:** –í–∫–ª—é—á–∏—Ç–µ RLS –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –≤ Supabase Dashboard!

```sql
-- –ü—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∏ (–≤ Supabase SQL Editor)
ALTER TABLE transcriptions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Enable read access for service role"
ON transcriptions FOR SELECT
TO service_role
USING (true);
```

### Service Role Key

- ‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!
- ‚úÖ –¢–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á

---

## üß™ Security Testing

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
@playbook security-validate

# SAFE –ø—Ä–æ–≤–µ—Ä–∫–∏
python .cursor/validation/safe/run.py --mode strict

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
pip audit  # –∏–ª–∏ safety check
```

### Penetration Testing

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ production deploy.

---

## üìã Compliance

### GDPR

- Zero-retention –∞—É–¥–∏–æ ‚úÖ
- PII –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
- –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚úÖ (—á–µ—Ä–µ–∑ API)

### SOC 2 (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
- Audit trails
- –ò–Ω—Ü–∏–¥–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç

---

## üö® Reporting Security Issues

–ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç—å:

1. **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π issue**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ email –Ω–∞: security@reflexio.example.com
3. –í–∫–ª—é—á–∏—Ç–µ:
   - –û–ø–∏—Å–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
   - –®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** –í —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 3 –Ω–æ—è–±—Ä—è 2025











